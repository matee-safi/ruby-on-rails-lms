<%= simple_form_for(blog) do |f| %>

  <div class="mt-4">
    <%= render 'shared/error_messages', object: blog, locals: { class: "mt-4" } %>
  </div>

  <div class="my-5">
    <%= f.label :title %>
    <%= f.text_field :title, class: "block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>
  </div>

  <div class="my-5">
    <%= f.label :content %>
    <%= f.text_area :content, rows: 4, class: "block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>
  </div>

  <div data-controller="blog-image-preview" class="my-5">
    <%= f.label :title_image %> (Optional but recommended)
    <%= f.file_field :title_image,
      direct_upload: true,
      data: { target: "blog-image-preview.input", action: "change->blog-image-preview#preview" },
      class: "file-input file-input-bordered file-input-primary mt-2 w-full"
    %>
    <% if blog.title_image.attached? %>
      <%= image_tag blog.title_image, data: { target: "blog-image-preview.preview" }, class: "w-full h-full object-cover rounded-lg mt-2" %>
      <%= button_tag "Remove Image", data: { action: "click->blog-image-preview#removeImage" }, type: "button", class: "btn btn-secondary mt-2" %>
    <% else %>
      <%= image_tag "https://www.eventbrite.com/engineering/wp-content/uploads/engineering/2018/08/Flexible-Reusable-React-File-Uploader.png", data: { target: "blog-image-preview.preview" }, class: "w-full h-full object-cover rounded-lg mt-2" %>
      <!-- Add a hidden field to track removal of image during update -->
      <%= f.hidden_field :remove_title_image, value: false %>
    <% end %>
  </div>

  <div class="flex gap-5 justify-end">
    <%= link_to "Cancel", blogs_path, class: "btn" %>
    <%= f.submit class:"btn btn-primary" %>
  </div>
<% end %>
